<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project Page</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&display=swap" rel="stylesheet">
  
  <!-- 🔺 스타일시트 연결 -->
  <link rel="stylesheet" href="../2.PageElement/Tob_nav/Tob_nav.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <link rel="stylesheet" href="../2.PageElement/Footer/Footer.css" />
  <link rel="stylesheet" href="../2.PageElement/Cursor/cursor.css" />
  <style>
    :root{
      --page-max: 1280px;
      --page-pad: 60px;
      --grid-gap-x: 70px; /* 카드 좌우 간격 확대 */
      --grid-gap-y: 40px; /* 카드 상하 간격 확대 */
      --card-pad: 10px;
      --card-min: 300px;  /* desktop 기본 카드 최소폭 → 이미지 더 크게 */
    }

    html, body { height: 100%; }
    .page-wrapper { min-height: 100vh; display: flex; flex-direction: column; }

   /* ───────── 프로젝트 그리드 및 보조(필터) 네비게이션 다듬기 ───────── */
    .project-toolbar{
      position: static;
      top: auto;
      z-index: auto;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,.12);
      max-width: var(--page-max);
      margin: 0 auto;
      padding: 40px var(--page-pad) 30px;
      width: calc(var(--page-max) - 2 * var(--page-pad));
    }
    

    /* 갤러리: 반응형 그리드 (240px 이상 카드가 자동으로 채워짐) */
    .project-gallery{
      max-width: var(--page-max);
      margin: 0 auto;
      padding: 32px var(--page-pad) 0;
      width: calc(var(--page-max) - 2 * var(--page-pad));
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(var(--card-min), 1fr));
      column-gap: var(--grid-gap-x);
      row-gap: var(--grid-gap-y);
    }

    /* 카드: 동일한 비율, 공통 여백, 호버 인터랙션 */
    .project-gridcard{
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 0;                 /* 이미지가 더 크게 보이도록 카드 내부 여백 제거 */
      background: #0e0e12;        /* Designer page card bg */
      border: none;               /* 카드 테두리 제거 */
      border-radius: 12px;
      overflow: hidden;
      transition: transform .18s ease, box-shadow .18s ease; /* border-color 트랜지션 제거 */
    }
    
    .project-gridcard:hover{ 
      transform: translateY(-4px); 
      box-shadow: 0 8px 24px rgba(0,0,0,.35); 
    }

    /* PNG 썸네일 전체 표시 (잘림 방지) + 확대 효과 */
    .project-gridcard img{
      width: 100%;
      height: auto;
      aspect-ratio: 5/5;          /* 세로 공간을 더 확보해 이미지가 더 커 보이게 */
      object-fit: contain;        /* 이미지 크롭 없이 전체 표시 */
      padding: 0;
      border-radius: 10px;
      background: transparent;
      display: block;
      transform: scale(1.08);     /* 약간 확대 */
      transition: transform .25s ease;
    }

    .project-gridcard:hover img{
      transform: scale(1.12);     /* 호버 시 살짝 더 확대 */
    }

    /* Designer 페이지와 유사한 하단 여백(footer와 간격) */
    .main{ flex: 1 0 auto; padding-bottom: 0; }

    /* 프로젝트 수/검색 바 영역도 블랙 테마 톤으로 통일 */
    .project-summarybar{
      display:flex; justify-content:space-between; align-items:center;
      margin: 0 auto;
      padding: 10px var(--page-pad) 10px;
      width: calc(var(--page-max) - 2 * var(--page-pad));
      border-bottom:1px solid rgba(255,255,255,0.12);
      position: relative;
      justify-content: space-between;
      align-items: center;
      overflow: visible;
    }

    /* 텍스트 블록: 좌측 정렬, 계층 강조 */
    .project-gridcard .title{ 
      padding: 8px 12px 0; 
      font-weight:700; 
      font-size:16px; 
      color:#fff !important; 
    }

    .project-gridcard .text{ 
      padding: 0 12px 14px; 
      font-size:13px; 
      color:#bdbdbd; 
      line-height:1.4; 
    }

    /* 기본 캡션은 숨김: 클릭 시 오버레이로만 표시 */
    .project-gridcard .title,
    .project-gridcard .text{
      display: none !important;
    }

    @media (min-width: 1440px){
      :root{ --grid-gap-x: 32px; --grid-gap-y: 20px;}
    }

    /* 검색 입력 필드 스타일 분리 (.search-input) */
    .search-input {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      background: rgb(24, 24, 24);
      backdrop-filter: blur(6px);
      color: rgb(161, 161, 161);
      font-size: 14px;
      outline: none;
      width: 220px;
      transition: box-shadow 0.3s ease;
      box-shadow: inset 0 0 0 1px rgba(37, 37, 37, 0.2);
    }

    /* 검색 입력 래퍼 + 우측 장미 아이콘 */
    .search-wrap{
      position: relative;
      display: inline-block;
      overflow: visible; /* 아이콘이 바깥으로 나가도 보이게 */
    }
    .search-wrap .search-input{
      width: 150px;
      height: 26px;
      padding: 8px 50px 8px 16px; /* 더 얇게, 아이콘 공간 확보 */
      border-radius: 10px;        /* 너무 둥글지 않게 */
      background: rgba(26,26,26,0.9);
      border: 1px solid rgba(255,255,255,0.05);
      box-shadow: none;
      outline: none;
      font-size: 13px;
    }
    .search-wrap .search-icon{
      position: absolute;
      top: 50%;
      right: -14px;               /* 오른쪽 바깥 살짝 */
      width: 40px;
      height: 40px;
      transform: translateY(-50%);
      pointer-events: none;
      opacity: 1;
      background: #fff;
      -webkit-mask-image: url("../1.Picture/1.%2027th%20Graduation/BLOOM_LOGO/1.png");
      -webkit-mask-size: contain;
      -webkit-mask-repeat: no-repeat;
      -webkit-mask-position: center;
              mask-image: url("../1.Picture/1.%2027th%20Graduation/BLOOM_LOGO/1.png");
              mask-size: contain;
              mask-repeat: no-repeat;
              mask-position: center;
      filter: drop-shadow(0 1px 0 rgba(0,0,0,.3));
    }
    .search-wrap .search-input::placeholder{
      color: rgba(220,220,220,.72);
      letter-spacing: .2px;
    }
    .search-wrap .search-input:focus{
      box-shadow: inset 0 0 0 1px rgba(255,77,77,.55), 0 0 0 2px rgba(255,77,77,.15);
      outline: none;
    }

    /* =====전체 블랙 테마 전용 스타일 덮어쓰기 ===== */
    html, body { background: #000; }
    .project-title{ color:#fff; }

    /* 카드 배경을 진한 블랙으로 설정 */
    .project-gridcard{
      background:#000 !important;
      border:none !important; /* 테두리 완전 제거 */
    }
    .project-gridcard .text{ color:#c9c9c9; }

    /* ===== Designer 페이지와 동일한 여백 설정 ===== */
    .main{ padding-top: 80px; } /* Designer.html과 동일한 상단 여백 맞춤 */

    .project-title{
      font-family: 'Playfair Display', serif;
      font-weight: 800; /* 더 균형 잡힌 느낌을 위한 ExtraBold 폰트 사용 */
      font-size: 5rem;
      line-height: 1.1;
      text-align: center;
      color: #fff;
      margin: 0 0 6rem;
    }

    /* =====카드 근접 시 오버레이 표시 ===== */
    .project-gridcard .overlay{
      position: absolute;
      inset: var(--card-pad);
      display: flex;
      align-items: center;         /* ⬅ 가운데 정렬 */
      justify-content: center;     /* ⬅ 가운데 정렬 */
      padding: 14px 16px;
      background: rgba(0,0,0,.38); /* 이미지 위에 살짝 어둡게 */
      color: #fff;
      text-align: center;          /* 텍스트 중앙정렬 */
      opacity: 0;
      transform: translateY(6px);
      transition: opacity .25s ease, transform .25s ease, border-color .25s ease, background-color .25s ease, box-shadow .25s ease;
      pointer-events: none;
      border-radius: 10px;         /* match inner media radius */
      z-index: 5;                  /* 이미지 위로 확실히 */
      text-shadow: 0 1px 2px rgba(0,0,0,.55);
      border: 1px solid transparent;            /* 기본은 라인 숨김 */
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
      box-shadow: inset 0 0 0 0 rgba(255,255,255,0.08); /* 트랜지션용 */
    }
    .project-gridcard .overlay .overlay-inner{
      display: inline-block;
      max-width: 90%;
    }
    .project-gridcard .overlay .overlay-title{
      color:#fff !important;
      font-weight: 900;
      font-size: clamp(18px, 1.6vw, 22px);
      line-height: 1.25;
      letter-spacing: .2px;
    }
    .project-gridcard .overlay .overlay-meta{
      margin-top: 8px;
      font-size: clamp(13px, 1.2vw, 15px);
      color: #eee;
      opacity: .95;
    }
    .project-gridcard .overlay .overlay-meta span{
      color: #d6d6d6;
    }

    /* 호버 시 오버레이 표시 및 glass line 효과 */
    .project-gridcard:hover .overlay{
      opacity: 1;
      transform: translateY(0);
      background: rgba(0,0,0,.48);              /* 살짝 더 진해짐 */
      border-color: rgba(255,255,255,0.22);      /* 라인이 은은하게 나타남 */
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
    }

    /* === Tob_nav 룩&필 통일 오버라이드 (이 파일 전용) === */
    #nav-placeholder{
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: transform 0.6s ease-in-out; /* 시간 늘리고 부드러운 곡선 적용 */
      will-change: transform;
    }

    /* 헤더 비주얼: 반투명 블랙 + 블러 + 얇은 구분선 */
    #nav-placeholder header{
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,.12);
      box-sizing: border-box;
      width: 100%;
      height: 90px;
      padding-left: 59px;
      padding-right: 60px;
      box-shadow: 0 8px 24px rgba(0,0,0,.18);
      transition: transform .38s cubic-bezier(.22,.61,.36,1), box-shadow .24s ease;
    }

    /* 로고 크기 조정 */
    #nav-placeholder header .logo img{
      max-height: 38px;
      transform: translateY(2px);
    }

    #nav-placeholder .logo .logo-main{ font-size: 15px !important; }
    #nav-placeholder .logo .logo-sub { font-size: 15px !important; }


    /* 네비 링크 타이포그래피 */
    #nav-placeholder header a{
      font-family: 'Pretendard', sans-serif;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: .2px;
      text-decoration: none;
      color: #fff;
      padding: 8px 0;
    }
    
    #nav-placeholder header a:hover{ color:#ff3b3b; }
    #nav-placeholder header a.is-active{ color:#ff4d4d; font-weight:700; }

    #nav-placeholder nav ul{
      display: flex;
      align-items: center;       /* 세로 가운데 정렬 */
      gap: 47px;                 /* Project 페이지 간격과 동일하게 */
      list-style: none;
      margin: 0;
      padding: 0;
    }

    /* 스크롤 시 네비게이션 숨김 */
    body.nav-hidden #nav-placeholder,
    body.nav-hidden #nav-placeholder > header {
      transform: translateY(-300%) !important;
    }
    

    footer, .site-footer, #footer{
      position:relative !important;
      width:100%;
      background:#000 !important;
      border-top:1px solid var(--line);
      z-index: 1;
      margin-top: 100px !important; /* 하단과 약간의 여백 추가 */
    }

    /* 상단 이동 버튼 */
    #scrollTopBtn {
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:99999; /* 맨 위 */
      display:flex;               /* ▼ 보여질 때 flex 정렬 적용 */
      align-items:center;
      justify-content:center;
      width:44px; height:44px;
      border-radius:30px;
      background:#000;
      color:#fff; font-weight:900; letter-spacing:.3px;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      cursor:pointer;
      opacity:0;                  /* 처음엔 안 보이게 */
      visibility:hidden;          /* 접근성/포커스 방지 */
      transition: opacity .25s ease, visibility .25s ease, box-shadow .25s ease, color .25s ease;
    }
    #scrollTopBtn.show {          /* 스크롤 조건 충족 시 노출 */
      opacity:1;
      visibility:visible;
    }
    #scrollTopBtn:hover {
      color:#ff3b3b; 
      box-shadow:0 6px 22px rgba(255,59,59,.25); 
    }
    
</style>
</head>
<body>
  <div class="page-wrapper">
    <!-- 🔺 네비게이션 영역 -->
    <div id="nav-placeholder"></div>
    <div class="nav-spacer"></div>
    <div id="cursor-placeholder"></div>

    <div class="main">
    <div class="title-wrap">
      <h1 class="project-title">PROJECT</h1>
    </div>
    
    <!-- 🔍 블랙&레드 필터/검색/정렬 영역 -->
    <div class="project-toolbar">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        
        <!-- 필터 탭 -->
        <div style="display: flex; gap: 36px; align-items: center;">

          <span data-filter="all" 
            style="font-size: 18px; font-weight: 800; color: red; cursor: pointer;">
            All
          </span>

          <span data-filter="line" 
            style="font-size: 18px; font-weight: 500; color: #aaa; pointer-events: none;">
            |
          </span>

          <span data-filter="character"   
            style="font-size: 18px; font-weight: 500; color: #aaa; cursor: pointer;">
           Character
          </span>

          <span data-filter="line" 
            style="font-size: 18px; font-weight: 500; color: #aaa; pointer-events: none;">
            |
          </span>

          <span data-filter="ci-bi-package" 
            style="font-size: 18px; font-weight: 500; color: #aaa; cursor: pointer;"> 
            BI / CI & Package
          </span>

          <span data-filter="line" 
            style="font-size: 18px; font-weight: 500; color: #aaa; pointer-events: none;">
            |
          </span>

          <span data-filter="uxui&editorial" 
            style="font-size: 18px; font-weight: 500; color: #aaa; cursor: pointer;">
            UX / UI & Editorial
          </span>
          

        </div>

        <!-- 정렬 -->
        <div style="display: flex; gap: 10px;">
          <button id="sort-asc"  style="padding: 10px 18px; border: 1px solid #424242; background-color: #000; font-size: 14px; font-weight: 600; color: rgb(159, 159, 159); border-radius: 6px; cursor: pointer;" aria-pressed="false">오름차순</button>
          <button id="sort-desc" style="padding: 10px 18px; border: 1px solid #424242; background-color: #000; font-size: 14px; font-weight: 600; color: rgb(159, 159, 159); border-radius: 6px; cursor: pointer;" aria-pressed="false">내림차순</button>
        </div>
      </div>
    </div>
    <div class="project-summarybar">
      <div id="project-count" style="font-size: 48px; font-weight: 900; display: flex; justify-content: center; align-items: center; gap: 10px;">0 Project</div>
      <div style="min-width: 360px; display: flex; justify-content: flex-end;">
        <div class="search-wrap">
          <input
            id="project-search"
            type="text"
            placeholder="프로젝트명·이름·초성 검색…"
            class="search-input"
            aria-label="프로젝트 검색"
          />
          <span class="search-icon" aria-hidden="true"></span>
        </div>
      </div>
    </div>

    <div class="project-gallery"> 
      <div class="project-gridcard" data-category="ci-bi-package">
          <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM NAYEON.jpg" alt="Project Title" />
          <div class="title">OWINT</div>
          <div class="text"><strong>김나연</strong><br />
            <span>KIM NAYEON</span>
          </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
          <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM MINJIN.jpg" alt="녹티스" />
          <div class="title">녹티스</div>
          <div class="text"><strong>김민진</strong><br />
            <span>KIM MINJIN</span>
          </div>
      </div>

      <div class="project-gridcard" data-category="uxui&editorial" onclick="location.href='Project/김사율/Project_김사율.html'" style="cursor: pointer;">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM SAYUL.jpg" alt="큐 패스" />
          <div class="title">큐 패스</div>
            <div class="text"><strong>김사율</strong><br />
              <span>Kim SAYUL</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM YUBIN.jpg" alt="베리슈푸" />
          <div class="title">베리슈푸</div>
            <div class="text"><strong>김유빈</strong><br />
              <span>KIM YUBIN</span>
            </div>
      </div>
      
      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM JUNSEONG.jpg" alt="MOODLEY(무들리)" />
          <div class="title">MOODLEY(무들리)</div>
            <div class="text"><strong>김준성</strong><br />
              <span>KIM JUNSEONG</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM JIU.jpg" alt="LUMIA" />
          <div class="title">LUMIA</div>
            <div class="text"><strong>김지우</strong><br />
              <span>KIM JIU</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM HYERIM.jpg" alt="리미네 농장" />
          <div class="title">리미네 농장</div>
            <div class="text"><strong>김혜림</strong><br />
              <span>KIM HYERIM</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/KIM HYEYEON.jpg" alt="오피스쥬" />
          <div class="title">오피스쥬</div>
            <div class="text"><strong>김혜연</strong><br />
              <span>KIM HYEYEON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="uxui&editorial">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/NAM YEJU.jpg" alt="그린부디스" />
          <div class="title">그린부디스</div>
            <div class="text"><strong>남예주</strong><br />
              <span>HWANG YEBIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LUO YONGKANG.jpg" alt="사찰 커피" />
          <div class="title">사찰 커피</div>
            <div class="text"><strong>라영강</strong><br />
              <span>LUO YONGKANG/罗永康</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/PARK EUNJE.jpg" alt="여린(YEORIN)" />
          <div class="title">여린(YEORIN)</div>
            <div class="text"><strong>박은제</strong><br />
              <span>PARK EUNJE</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/BAE YUJIN.jpg" alt="Shadow Tales" />
          <div class="title">Shadow Tales</div>
            <div class="text"><strong>배유진</strong><br />
              <span>BAE YUJIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/BAE EJUA.jpg" alt="나무도시" />
          <div class="title">나무도시</div>
            <div class="text"><strong>배주아</strong><br />
              <span>BAE JUA</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/FAN XIANGYU.jpg" alt="YOLO BITES" />
          <div class="title">YOLO BITES</div>
            <div class="text"><strong>범상우</strong><br />
              <span>FAN XIANGYU / 范祥宇</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/SEO EUNSUN.jpg" alt="소슬로우" />
          <div class="title">소슬로우</div>
            <div class="text"><strong>서은선</strong><br />
              <span>SEO EUNSUN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/XUE KEXIN.jpg" alt="CHUNSHAN FU" />
          <div class="title">CHUNSHAN FU</div>
            <div class="text"><strong>설가심</strong><br />
              <span>XUE KEXIN/薛可心</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/AN YEJIN.jpg" alt="NOVE" />
          <div class="title">NOVE</div>
            <div class="text"><strong>안예진</strong><br />
              <span>AN YEJIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character" onclick="location.href='../8.ProjectSection/안정연.html'" style="cursor: pointer;">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/AN JEONGYEON.jpg" alt="Fire UP Studio" />
          <div class="title">Fire UP Studio</div>
            <div class="text"><strong>안정연</strong><br />
              <span>AN JEONGYEON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/YANG YUSEONG.jpg" alt="할 DO IT 다" />
          <div class="title">할 DO IT 다</div>
            <div class="text"><strong>양유성</strong><br />
              <span>YANG YUSEONG</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/WANG MENGRAN.jpg" alt="고본" />
          <div class="title">고본</div>
            <div class="text"><strong>왕몽연</strong><br />
              <span>WANG MENGRAN/王梦然</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/YOON MINJU.jpg" alt="floblo" />
          <div class="title">floblo</div>
            <div class="text"><strong>윤민주</strong><br />
              <span>YOON MINJU</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LEE DAHYEON.jpg" alt="EASY PICK" />
          <div class="title">EASY PICK</div>
            <div class="text"><strong>이다현</strong><br />
              <span>LEE DAHYEON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="uxui&editorial">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LEE SEJIN.jpg" alt="심표" />
          <div class="title">심표</div>
            <div class="text"><strong>이서진</strong><br />
              <span>LEE SEOJIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="uxui&editorial">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LEE SUBIN.jpg" alt="Today's Green" />
          <div class="title">Project Title</div>
            <div class="text"><strong>이수빈</strong><br />
              <span>LEE SUBIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LEE EUNGYEONG.jpg" alt="필바니즈" />
          <div class="title">필바니즈</div>
            <div class="text"><strong>이은경</strong><br />
              <span>LEE EUNGYEONG</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/LEE JUYEONG.jpg" alt="Nest" />
          <div class="title">Nest</div>
            <div class="text"><strong>이주영</strong><br />
              <span>LEE JUYEONG</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="uxui&editorial">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/이혜주.png" alt="MOODAY" />
          <div class="title">MOODAY</div>
            <div class="text"><strong>이혜주</strong><br />
              <span>LEE HYEJU</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/JANG SEHEE.jpg" alt="고요(GOYO)" />
        <div class="title">고요(GOYO)</div>
        <div class="text"><strong>장세희</strong><br />
          <span>JANG SEHEE</span>
        </div>
      </div>
      
      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/JANG JUAH.jpg" alt="아틱랩" />
          <div class="title">아틱랩</div>
            <div class="text"><strong>장주아</strong><br />
              <span>JANG JUAH</span>
            </div>
      </div>
      
      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/ZHANG QINGQING.jpg" alt="Crunchi" />
          <div class="title">Crunchi</div>
            <div class="text"><strong>장청청</strong><br />
              <span>ZHANG QINGQING/张晴晴</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/JEON WOOGON.jpg" alt="삼성퇴 문장 IP 디자인" />
          <div class="title">삼성퇴 문장 IP 디자인</div>
            <div class="text"><strong>전우곤</strong><br />
              <span>JEON WOOGON/田雨坤</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/ZHOU HANGYU.jpg" alt="Non-breath Oblinge" />
          <div class="title">Non-breath Oblinge</div>
            <div class="text"><strong>주하우</strong><br />
              <span>ZHOU HANGYU/周航宇</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/JI YEONGHYEON.jpg" alt="일채(ILCHAE)" />
          <div class="title">일채(ILCHAE)</div>
            <div class="text"><strong>지영현</strong><br />
              <span>JI YEONGHYEON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/CHA EUNJI.jpg alt="쿠쿠 플래닛" />
          <div class="title">쿠쿠 플래닛</div>
            <div class="text"><strong>차은지</strong><br />
              <span>CHA EUNJI</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/CHOI MINWON.jpg" alt="Patch World" />
          <div class="title">Patch World</div>
            <div class="text"><strong>최민원</strong><br />
              <span>CHOI MINWON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/CHOI SOONJU.jpg" alt="아오로다 AOURODA" />
          <div class="title">아오로다 AOURODA</div>
            <div class="text"><strong>최순주</strong><br />
              <span>CHOI SOONJU</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/" alt="하람 & 로제" />
          <div class="title">하람 & 로제</div>
            <div class="text"><strong>최영인</strong><br />
              <span>CHOI YOUNGIN</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="character">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/CHOI JAYEON.jpg" alt="코코미(cocomi)" />
          <div class="title">코코미(cocomi)</div>
            <div class="text"><strong>최자연</strong><br />
              <span>CHOI JAYEON</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/HAN PEIDA.jpg" alt="吃不胖" />
          <div class="title">吃不胖</div>
            <div class="text"><strong>한패달</strong><br />
              <span>HAN PEIDA/韩沛达</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/HONG HWAJUNG.jpg" alt="RE:MIND" />
          <div class="title">RE:MIND</div>
            <div class="text"><strong>홍화정</strong><br />
              <span>HONG HWAJUNG</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/HWANG MANGYU.jpg" alt="이든결" />
          <div class="title">이든결</div>
            <div class="text"><strong>황만규</strong><br />
              <span>HWANG MANGYU</span>
            </div>
      </div>

      <div class="project-gridcard" data-category="ci-bi-package">
        <img src="../1.Picture/2.%20Graduate/Graduate_Logo/HWANG YEBIN.jpg" alt="이파리" />
          <div class="title">이파리</div>
            <div class="text"><strong>황예빈</strong><br />
              <span>HWANG YEBIN</span>
            </div>
      </div>
  </div>
    <!-- 🔻 탑버튼 -->
    <button id="scrollTopBtn" title="맨 위로">▲</button>

    <!-- 🔻 푸터 영역 -->
    <div id="footer-placeholder"></div>

  </div>

<script>
     //-- 📜 JavaScript --//
     // 네비게이션 HTML 로드 (로고 교체 + 링크 정규화 + 스크롤시 숨김)
     const __navPaths = [
       // Prefer the project-style nav first (matches Guest page look) then fallback
       '../2.PageElement/Tob_nav/Tob_nav_project.html',
       '../../2.PageElement/Tob_nav/Tob_nav_project.html',
       '../2.PageElement/Tob_nav/Tob_nav.html',
       '../../2.PageElement/Tob_nav/Tob_nav.html'
     ];
     function fetchNav(paths){
       const [first, ...rest] = paths;
       return fetch(first, { cache: 'no-store' }).then(r => {
         if (!r.ok) throw new Error('HTTP ' + r.status);
         return r.text();
       }).catch(err => {
         if (!rest.length) throw err;    
         return fetchNav(rest);
       }); 
     } 
     fetchNav(__navPaths)
       .then(html => {
         const parser = new DOMParser();
         const doc = parser.parseFromString(html, 'text/html');

         // 로고 이미지 교체 (상대경로 이슈 방지)
         const logoContainer = doc.querySelector('.logo');
         if (logoContainer) {
           const imgs = logoContainer.querySelectorAll('img');
           if (imgs.length > 0) {
             imgs[0].outerHTML = '<img src="../1.Picture/1.%2027th%20Graduation/BLOOM_LOGO/1.png" alt="장미로고" />';
             if (imgs.length > 1) {
               imgs[1].setAttribute('src', '../1.Picture/1.%2027th%20Graduation/BLOOM_LOGO/BLOOM_LOGOTAXT.png');
             }
           }
         } else {
           // 혹시 .logo 래퍼가 없으면 이미지 전체에서 대체
           doc.querySelectorAll('img').forEach(img => {
             const alt = img.getAttribute('alt') || '';
             const src = img.getAttribute('src') || '';
             if (alt.includes('장미') || /BLOOM_LOGO|대지\.png|대지\.png/.test(src)) {
               img.outerHTML = '<img src="../1.Picture/1.%2027th%20Graduation/BLOOM_LOGO/1.png" alt="장미로고" />';
             }
           });
         }

         // 링크 정규화 (어느 페이지에서든 동작)
         const baseEl = doc.querySelector('base');
         if (baseEl) baseEl.remove();

         // ======== 링크 매핑 (2025 폴더 내 페이지끼리 정확히 연결) ========
         // 현재 페이지가 위치한 디렉터리(예: /.../2025)를 기준으로 링크를 만든다.
         const baseDir = location.pathname.replace(/\/[^/]*$/, ''); // /2025
         const toURL = (file) => `${baseDir}/${file}`.replace(/\/{2,}/g, '/');

         const linkMap = {
           'home': toURL('Main.html'),
           'about': toURL('About.html'),
           'project': toURL('Project.html'),
           'designer': toURL('Designer.html'),
           'guest': toURL('Guest.html'),
           'guest book': toURL('Guest.html'),
           'guestbook': toURL('Guest.html'),
         };

         // 로고 링크도 홈으로 고정
         const logoLink = doc.querySelector('a.logo, .logo a');
         if (logoLink) logoLink.setAttribute('href', linkMap['home']);

         // 모든 a 태그를 매핑 규칙에 맞춰 교체
         doc.querySelectorAll('a[href]').forEach(a => {
           const text = (a.textContent || '').trim().toLowerCase();
           const href = (a.getAttribute('href') || '').trim();

           if (linkMap[text]) {
             a.setAttribute('href', linkMap[text]);
             return;
           }

           if (/about/i.test(href))          a.setAttribute('href', linkMap['about']);
           else if (/project/i.test(href))   a.setAttribute('href', linkMap['project']);
           else if (/designer/i.test(href))  a.setAttribute('href', linkMap['designer']);
           else if (/guest(\s*book)?/i.test(href)) a.setAttribute('href', linkMap['guest']);
           else if (/main|home|index/i.test(href)) a.setAttribute('href', linkMap['home']);
         });

         // 현재 페이지 표시(활성 상태)
         const currentName = location.pathname.split('/').pop().toLowerCase(); // project.html 등
         doc.querySelectorAll('a[href]').forEach(a => {
           const target = (a.getAttribute('href') || '').toLowerCase();
           if (target.endsWith(currentName)) {
             a.setAttribute('aria-current', 'page');
             a.classList.add('is-active');
           }
         });

         // === inject ONLY the <header> from Tob_nav to avoid extra wrappers ===
         const navRoot = document.getElementById('nav-placeholder');
         const headerEl = doc.querySelector('header');
         if (navRoot && headerEl) {
           navRoot.innerHTML = '';
           navRoot.appendChild(headerEl);
         }

         // Remove dropdown structures and classes (flat menu like Guest)
         (function stripDropdowns(){
           const navRootEl = document.getElementById('nav-placeholder');
           if (!navRootEl) return;
           navRootEl.querySelectorAll('nav ul ul, .dropdown, .submenu, .menu .sub, [aria-haspopup="true"] > ul').forEach(el=>{
             try{ el.remove(); }catch(_){ el.parentNode && el.parentNode.removeChild(el); }
           });
           navRootEl.querySelectorAll('.has-dropdown, .has-children, .dropdown-toggle').forEach(el=>{
             el.classList.remove('has-dropdown','has-children','dropdown-toggle');
             el.removeAttribute('aria-haspopup');
             el.removeAttribute('aria-expanded');
           });
         })();

         // Single scroll listener: hide nav on scroll down, show on scroll up
         (function bindHideShowNav(){
           let prevY = window.pageYOffset || 0;
           window.addEventListener('scroll', function(){
             const y = window.pageYOffset || 0;
             const delta = y - prevY;
             if (y > 40 && delta > 6) {
               document.body.classList.add('nav-hidden');
             } else if (delta < -6) {
               document.body.classList.remove('nav-hidden');
             }
             prevY = y;
           }, { passive:true });
         })();
        // —— Global safety bind: always toggle, and also set inline transform ——
        (function hardBindHideShow(){
          if (window.__navSmoothBind) return; // prevent duplicate binding
          window.__navSmoothBind = true;

          let prevY = window.pageYOffset || 0;
          let accDown = 0;   // accumulate downward scroll distance
          let accUp   = 0;   // accumulate upward scroll distance
          const root  = document.getElementById('nav-placeholder');

          function apply(hide){
            document.body.classList.toggle('nav-hidden', hide);
            if (!root) return;
            // inline styles as a safety net against external CSS overrides
            root.style.transform = hide ? 'translate3d(0,-110%,0)' : '';
            root.style.opacity   = hide ? '0' : '';
            root.style.filter    = hide ? 'blur(4px)' : '';
          }

          window.addEventListener('scroll', function(){
            const y  = window.pageYOffset || 0;
            const dy = y - prevY;

            if (dy > 0){
              accDown += dy; // scrolling down
              accUp = 0;
            } else if (dy < 0){
              accUp += -dy;  // scrolling up
              accDown = 0;
            }

            // 더 많이 내릴 때 숨기고(accDown), 더 올려야 나타나게(accUp) 설정
            if (y > 60 && accDown > 140) {
              apply(true);
            } else if (accUp > 24) {
              apply(false);
            }

            prevY = y;
          }, { passive: true });

          // quick reveal when user wheels upward or swipes down
          window.addEventListener('wheel', (e)=>{ if (e.deltaY < 0) apply(false); }, { passive:true });
          let touchStartY = 0;
          window.addEventListener('touchstart', (e)=>{ touchStartY = e.touches[0]?.clientY || 0; }, { passive:true });
          window.addEventListener('touchmove',  (e)=>{
            const y = e.touches[0]?.clientY || 0;
            if (y - touchStartY > 8) apply(false);
          }, { passive:true });
        })();

         // --- dynamically match spacer to header height ---
         (function syncNavSpacer(){
           const root = document.getElementById('nav-placeholder');
           let spacer = document.querySelector('.nav-spacer');
           if (!spacer && root) {
             spacer = document.createElement('div');
             spacer.className = 'nav-spacer';
             root.after(spacer);
           }
           function setSpacer(){
             if (spacer){
               const header = document.querySelector('#nav-placeholder header');
               const h = header ? header.offsetHeight : 0;
               spacer.style.height = h + 'px';
             }
           }
           setSpacer();
           window.addEventListener('resize', setSpacer, { passive:true });
           setTimeout(setSpacer, 150);
           setTimeout(setSpacer, 600);
         })();
       }) 
       .catch(err => console.warn('[guest] nav load failed:', err));
     
  
     fetch('../2.PageElement/Cursor/cursor.html', { cache: 'no-store' })
       .then(res => res.text())
       .then(data => {
         document.getElementById('cursor-placeholder').innerHTML = data;
         // 커서 요소 주입 후 위치 업데이트 연결
         (function setupCustomCursor() {
           function attach() {
             const dot = document.querySelector('.cursor-dot');
             const ring = document.querySelector('.cursor-ring');
             if (!dot && !ring) return false;
             // 초기 위치
             const move = (e) => {
               if (dot) { dot.style.left = e.clientX + 'px'; dot.style.top = e.clientY + 'px'; }
               if (ring) { ring.style.left = e.clientX + 'px'; ring.style.top = e.clientY + 'px'; }
             };
             document.addEventListener('mousemove', move, { passive: true });
             return true;
           }
           if (!attach()) {
             const mo = new MutationObserver(() => { if (attach()) mo.disconnect(); });
             mo.observe(document.body, { childList: true, subtree: true });
           }
         })();
       });
     // --- Cursor fallback: ensure .cursor-dot exists and follows mouse ---
     (function ensureCursorFallback(){
       function mount(){
         let dot = document.querySelector('.cursor-dot');
         if (!dot){
           dot = document.createElement('div');
           dot.className = 'cursor-dot';
           document.body.appendChild(dot);
         }
         // optional ring off if not styled
         const ring = document.querySelector('.cursor-ring');
         if (ring) ring.style.pointerEvents = 'none';
         // attach mousemove once
         if (!window.__cursorMoveAttached){
           document.addEventListener('mousemove', function(e){
             if (dot){ dot.style.left = e.clientX + 'px'; dot.style.top = e.clientY + 'px'; }
             const r = document.querySelector('.cursor-ring');
             if (r){ r.style.left = e.clientX + 'px'; r.style.top = e.clientY + 'px'; }
           }, { passive: true });
           window.__cursorMoveAttached = true;
         }
       }
       // If fetch failed, add a safety timeout to mount anyway
       setTimeout(mount, 100);
       // Also observe DOM in case cursor nodes are injected later
       const mo = new MutationObserver(() => {
         if (document.querySelector('.cursor-dot')) { mo.disconnect(); }
         else { mount(); }
       });
       mo.observe(document.body, { childList: true, subtree: true });
     })();
     fetch('../2.PageElement/Footer/Footer.html', { cache: 'no-store' })
       .then(res => res.text())
       .then(data => {
         document.getElementById('footer-placeholder').innerHTML = data;
       });

     // === Build overlays from existing title/name blocks ===
     (function buildCardOverlays(){
       const cards = document.querySelectorAll('.project-gridcard');
       cards.forEach(card => {
         const titleEl = card.querySelector('.title');
         const textEl  = card.querySelector('.text');

         let title = card.getAttribute('data-title') || (titleEl ? titleEl.textContent.trim() : 'Project');
         let name  = card.getAttribute('data-name')  || (textEl ? (textEl.querySelector('strong')?.textContent.trim() || '') : '');
         let eng   = card.getAttribute('data-eng')   || (textEl ? (textEl.querySelector('span')?.textContent.trim()   || '') : '');

         if (!name){
           const alt = card.querySelector('img')?.getAttribute('alt') || '';
           name = alt.replace(/\bProject Title\b/i,'').trim() || name;
         }

         card.setAttribute('data-title', title);
         if (name) card.setAttribute('data-name', name);
         if (eng)  card.setAttribute('data-eng', eng);

         if (!card.querySelector('.overlay')){
           const overlay = document.createElement('div');
           overlay.className = 'overlay';
           overlay.innerHTML = `
             <div class="overlay-inner">
               <div class="overlay-title">${title}</div>
               <div class="overlay-meta">${name || ''}${eng ? ` · <span>${eng}</span>` : ''}</div>
             </div>`;
           card.appendChild(overlay);
         }
       });
     })();


     // 필터 버튼 클릭 시 필터링 기능
     document.querySelectorAll('[data-filter]').forEach(button => {
       button.addEventListener('click', () => {
         const selectedCategory = button.getAttribute('data-filter');
         const cards = document.querySelectorAll('.project-gridcard');

         cards.forEach(card => {
           const cardCategory = card.getAttribute('data-category');
           if (selectedCategory === 'all' || cardCategory === selectedCategory) {
             card.style.display = 'flex';
           } else {
             card.style.display = 'none';
           }
         });

         // 활성 탭 스타일 바꾸기
         document.querySelectorAll('[data-filter]').forEach(btn => {
           btn.style.color = '#aaa';
           btn.style.fontWeight = '500';
         });
         button.style.color = 'red';
         button.style.fontWeight = '900';
       });
     });
     function updateProjectCount() {
       const selectedCategory = document.querySelector('[data-filter][style*="color: red"]')?.getAttribute('data-filter') || 'all';
       const cards = document.querySelectorAll('.project-gridcard');

       let count = 0;
       cards.forEach(card => {
         const category = card.getAttribute('data-category');
         const isVisible = card.style.display !== 'none';
         if ((selectedCategory === 'all' || category === selectedCategory) && isVisible) {
           count++;
         }
       });

       document.getElementById('project-count').innerHTML = `<span style="font-size: 72px; color: white;">${count}</span> <span style="font-size: 18px; color: #aaa;">Project</span>`;
     }

    // 초성 기반 연속(순서 유지) 매칭을 위한 정규화 유틸
    const __CHO = ["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];
    function toInitials(str){
      return (str||'').split('').map(ch => {
        const code = ch.charCodeAt(0) - 44032; // 0xAC00
        // 한글 음절 → 초성, 이미 초성(ㄱ-ㅎ) → 그대로, 그 외(영문/숫자)는 소문자 유지
        if (code >= 0 && code < 11172) return __CHO[Math.floor(code/588)];
        if (/[ㄱ-ㅎ]/.test(ch)) return ch;           // 이미 초성
        if (/[A-Za-z0-9]/.test(ch)) return ch.toLowerCase();
        return ' ';                                   // 구분자는 공백으로
      }).join('');
    }
    // 🔍 이름 + 프로젝트 제목 + 초성 검색 (KO/EN 포함, 순서보장 · 필드별 비교 · 한글음절 우선)
    document.getElementById('project-search').addEventListener('input', function (e) {
      const query = (e.target.value || '').toLowerCase().trim();
      const hasCho   = /[\u3131-\u314e]/.test(query);  // ㄱ-ㅎ 존재
      const hasSyll  = /[\uac00-\ud7a3]/.test(query);  // 가-힣 존재 (한글 음절)
      const qInit    = toInitials(query).replace(/[^ㄱ-ㅎa-z0-9]/g, '');

      const cards = document.querySelectorAll('.project-gridcard');

      cards.forEach(card => {
        const title = (card.getAttribute('data-title') || card.querySelector('.title')?.textContent || '').toLowerCase();
        const nameKo = (card.getAttribute('data-name') || '').toLowerCase();
        const nameEn = (card.getAttribute('data-eng') || '').toLowerCase();
        const textFallback = (card.querySelector('.text')?.innerText || '').toLowerCase();

        // 일반 원문(필드별) 비교 준비
        const plainMatch = (
          title.includes(query) ||
          nameKo.includes(query) ||
          nameEn.includes(query) ||
          textFallback.includes(query)
        );

        // 필드별 초성열 (연속 substring 전용)
        const initTitle = toInitials(title).replace(/[^ㄱ-ㅎa-z0-9]/g, '');
        const initNameK = toInitials(nameKo).replace(/[^ㄱ-ㅎa-z0-9]/g, '');
        const initNameE = toInitials(nameEn).replace(/[^ㄱ-ㅎa-z0-9]/g, '');
        const initText  = toInitials(textFallback).replace(/[^ㄱ-ㅎa-z0-9]/g, '');

        let match = false;

        if (!query) {
          match = true;
        } else if (hasCho) {
          // ▶ 초성 포함 입력: 초성 연속 매칭만 허용 (순서 필수)
          match = (qInit && (
            initTitle.includes(qInit) ||
            initNameK.includes(qInit) ||
            initNameE.includes(qInit) ||
            initText.includes(qInit)
          ));
        } else if (hasSyll) {
          // ▶ 한글 음절 입력: 해당 음절의 '필드별' 부분일치만 허용 (초성 보조 금지)
          match = plainMatch;
        } else {
          // ▶ 비한글(영문/숫자 등) 입력: 일반 포함검색만
          match = (
            title.includes(query) ||
            nameKo.includes(query) ||
            nameEn.includes(query) ||
            textFallback.includes(query)
          );
        }

        card.style.display = match ? 'flex' : 'none';
      });

      updateProjectCount();
    });

     // 초기 로드시 반영
     updateProjectCount();

     // 필터 적용 후 개수 업데이트
     document.querySelectorAll('[data-filter]').forEach(button => {
       button.addEventListener('click', () => {  
         setTimeout(updateProjectCount, 100);
       });
     });

// === 정렬(오름/내림) : data-name > data-title > data-eng 우선 ===
(function enableSorting(){
  const gallery = document.querySelector('.project-gallery');
  const btnAsc  = document.getElementById('sort-asc');
  const btnDesc = document.getElementById('sort-desc');
  if (!gallery || !btnAsc || !btnDesc) return;
  const originalOrder = Array.from(gallery.querySelectorAll('.project-gridcard'));

  const collator = new Intl.Collator('ko', { usage:'sort', sensitivity:'base', numeric:true });
  let currentSort = null; // 'asc' | 'desc' | null

  function keyOf(card){
    const name  = (card.getAttribute('data-name')  || '').trim();
    const title = (card.getAttribute('data-title') || '').trim();
    const eng   = (card.getAttribute('data-eng')   || '').trim();
    return [name || title || eng, title || name || eng, eng || name || title];
  }

  function compare(a, b, order){
    const ka = keyOf(a);
    const kb = keyOf(b);
    for (let i=0;i<ka.length;i++){
      const c = collator.compare(ka[i], kb[i]);
      if (c !== 0) return order === 'desc' ? -c : c;
    }
    return 0;
  }

  function applySort(order){
    const cards = Array.from(gallery.querySelectorAll('.project-gridcard'));
    // 현재 표시 중인 카드만 우선 정렬(숨겨진 카드들은 뒤로 유지)
    const visible = cards.filter(c => c.style.display !== 'none');
    const hidden  = cards.filter(c => c.style.display === 'none');
    visible.sort((a,b)=>compare(a,b,order));

    // DOM 재배치: 보이는 카드들만 순서대로 먼저 붙이고, 숨김 카드는 뒤에 그대로
    const frag = document.createDocumentFragment();
    visible.forEach(c => frag.appendChild(c));
    hidden.forEach(c => frag.appendChild(c));
    gallery.appendChild(frag);
    currentSort = order;
    setActive(order);
  }

  function setActive(order){
    const on  = (btn) => { btn.style.borderColor = '#ff4d4d'; btn.style.color = '#ff4d4d'; btn.setAttribute('aria-pressed','true'); };
    const off = (btn) => { btn.style.borderColor = '#424242';  btn.style.color = 'rgb(159,159,159)'; btn.setAttribute('aria-pressed','false'); };
    off(btnAsc); off(btnDesc);
    if (order === 'asc') on(btnAsc);
    else if (order === 'desc') on(btnDesc);
    else { /* no active */ }
  }

  function resetSort(){
    const cards = Array.from(gallery.querySelectorAll('.project-gridcard'));
    const indexMap = new Map();
    originalOrder.forEach((el, i) => indexMap.set(el, i));
    const visible = cards.filter(c => c.style.display !== 'none');
    const hidden  = cards.filter(c => c.style.display === 'none');
    visible.sort((a,b)=> (indexMap.get(a) - indexMap.get(b)));
    const frag = document.createDocumentFragment();
    visible.forEach(c => frag.appendChild(c));
    hidden.forEach(c => frag.appendChild(c));
    gallery.appendChild(frag);
    currentSort = null;
    setActive(null);
  }

  // 버튼 바인딩 (토글)
  btnAsc.addEventListener('click',  () => { currentSort === 'asc'  ? resetSort() : applySort('asc');  });
  btnDesc.addEventListener('click', () => { currentSort === 'desc' ? resetSort() : applySort('desc'); });

  // 필터/검색 후에도 현재 정렬 유지
  function reapplyIfNeeded(){ if (currentSort) applySort(currentSort); }
  document.getElementById('project-search')?.addEventListener('input', () => setTimeout(reapplyIfNeeded, 0));
  document.querySelectorAll('[data-filter]').forEach(btn => btn.addEventListener('click', () => setTimeout(reapplyIfNeeded, 100)));
})();

// [라우팅] 화면 너비 기준 페이지 전환 (<=639px: Project-mobile.html, >=640px: Project.html)
(function responsiveRoute(){
  const DESKTOP_BASE = 'Project';
  const MOBILE_BASE  = 'Project-mobile';

  function isOnBase(base){
    const p = location.pathname.toLowerCase().replace(/\/+$/, '');
    const b = base.toLowerCase().replace(/\.html?$/, '');
    return (
      p.endsWith('/'+b) ||
      p.endsWith('/'+b+'.html') ||
      p.endsWith('/'+b+'/') ||
      p.endsWith('/'+b+'/index.html')
    );
  }
  function goToBase(base){
    const baseDir = location.pathname.replace(/[^/]*$/, '');
    const file = base + '.html';
    location.replace((baseDir + file).replace(/\/\/{2,}/g,'/'));
  }

  const mq = window.matchMedia('(max-width: 639px)');
  let ticking = false;
  function check(){
    if (ticking) return; ticking = true;
    requestAnimationFrame(() => {
      const isMobile = mq.matches;
      if (isMobile && isOnBase(DESKTOP_BASE)) goToBase(MOBILE_BASE);
      ticking = false;
    });
  }

  if (mq.addEventListener) mq.addEventListener('change', check, {passive:true});
  else if (mq.addListener) mq.addListener(check);
  window.addEventListener('resize', check, {passive:true});
  window.addEventListener('orientationchange', check, {passive:true});
  document.addEventListener('DOMContentLoaded', check);
  setTimeout(check, 120);
  // iOS/Safari 지연 대응
  let kicks = 0; const kickTimer = setInterval(()=>{ kicks++; check(); if (kicks>10) clearInterval(kickTimer); }, 200);
  window.addEventListener('pageshow', check, {passive:true});
  document.addEventListener('visibilitychange', check, {passive:true});
})();
// === 프로젝트 갤러리 이미지 로딩: 전체 빠른 로드(eager + high) ===
(function optimizeProjectImages(){
  const gallery = document.querySelector('.project-gallery');
  if (!gallery) return;
  const imgs = Array.from(gallery.querySelectorAll('img'));

  // 모든 이미지: 즉시 로드 우선
  imgs.forEach(img => {
    img.removeAttribute('loading');
    img.setAttribute('loading', 'eager');
    img.setAttribute('decoding', 'sync');            // 가능한 즉시 디코드
    img.setAttribute('fetchpriority', 'high');       // 네트워크 우선순위 상향

    // 로드 완료 시 페이드인 클래스 유지(선택)
    if (!img.__boundLoad){
      img.addEventListener('load', () => { img.classList.add('is-loaded'); }, { once:true });
      img.__boundLoad = true;
    }
  });

  // 브라우저가 최대한 빨리 가져오도록 preload 삽입 (과도 방지 위해 최대 60장)
  const head = document.head || document.getElementsByTagName('head')[0];
  imgs.slice(0, 60).forEach(img => {
    const href = img.currentSrc || img.getAttribute('src');
    if (!href) return;
    const link = document.createElement('link');
    link.rel = 'preload';
    link.as  = 'image';
    link.href = href;
    head.appendChild(link);
  });
})();

// === 상단 이동 버튼 ===
const scrollTopBtn = document.getElementById("scrollTopBtn");

window.addEventListener("scroll", () => {
  if (window.scrollY > 300) {
    scrollTopBtn.classList.add("show");
  } else {
    scrollTopBtn.classList.remove("show");
  }
});

scrollTopBtn.addEventListener("click", () => {
  window.scrollTo({ top: 0, behavior: "smooth" });
});
</script>
</html>