<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TUVD 27th Graduate Exhibition - BLOOM</title>
  <!-- ğŸ”º ìŠ¤íƒ€ì¼ì‹œíŠ¸ ì—°ê²° -->
  <!-- // ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="../../2.PageElement/Tob_nav/Tob_nav.css" />
  <!-- // í‘¸í„° ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="../../2.PageElement/Footer/Footer.css" />
  <!-- // ì»¤ì„œ ìŠ¤íƒ€ì¼ -->
  <link rel="stylesheet" href="../../2.PageElement/Cursor/cursor.css" />
  <style>
    /* ì¥ë¯¸ ì»¤ì„œ ê¸°ë³¸ ìŠ¤íƒ€ì¼( .cursor-dot / .rose-cursor ê³µí†µ ) */
    .cursor-dot, .rose-cursor, [data-rose-cursor]{
      position: fixed;
      left: -100px; top: -100px;         /* offscreen until first move */
      transform: translate3d(-9999px, -9999px, 0); /* moved offscreen until we know size */
      transform-origin: 50% 50%; /* center by default; JS will set exact px hotspot */
      pointer-events: none;               /* never block clicks */
      z-index: 99999;                     /* above everything */
      will-change: transform;             /* GPU hint for smoothness */
    }
    :root{ --nav-safe: 0px; --line: rgba(255,255,255,.12); }

    #nav-placeholder{
      position: sticky;
      top: 0;
      z-index: 1000;
      transition: transform 0.6s ease-in-out; /* ì‹œê°„ ëŠ˜ë¦¬ê³  ë¶€ë“œëŸ¬ìš´ ê³¡ì„  ì ìš© */
      will-change: transform;
    }

    /* í—¤ë” ë¹„ì£¼ì–¼: ë°˜íˆ¬ëª… ë¸”ë™ + ë¸”ëŸ¬ + ì–‡ì€ êµ¬ë¶„ì„  */
    #nav-placeholder header{
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(255,255,255,.12);
      box-sizing: border-box;
      width: 100%;
      height: 90px;
      padding-left: 59px;
      padding-right: 60px;
      box-shadow: 0 8px 24px rgba(0,0,0,.18);
      transition: transform .38s cubic-bezier(.22,.61,.36,1), box-shadow .24s ease;
    }

    /* ë¡œê³  í¬ê¸° ì¡°ì • */
    #nav-placeholder header .logo img{
      max-height: 38px;
      transform: translateY(2px);
    }

    #nav-placeholder .logo .logo-main{ font-size: 15px !important; }
    #nav-placeholder .logo .logo-sub { font-size: 15px !important; }


    /* ë„¤ë¹„ ë§í¬ íƒ€ì´í¬ê·¸ë˜í”¼ */
    #nav-placeholder header a{
      font-family: 'Pretendard', sans-serif;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: .2px;
      text-decoration: none;
      color: #fff;
      padding: 8px 0;
    }
    
    #nav-placeholder header a:hover{ color:#ff3b3b; }
    #nav-placeholder header a.is-active{ color:#ff4d4d; font-weight:700; }

    #nav-placeholder nav ul{
      display: flex;
      align-items: center;       /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
      gap: 47px;                 /* Project í˜ì´ì§€ ê°„ê²©ê³¼ ë™ì¼í•˜ê²Œ */
      list-style: none;
      margin: 0;
      padding: 0;
    }

    /* ìŠ¤í¬ë¡¤ ì‹œ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€ */
    body.nav-hidden #nav-placeholder,
    body.nav-hidden #nav-placeholder > header {
      transform: translateY(-110%) !important;
    }
    
    /* ì „ì²´ í™”ë©´ ë ˆì´ì•„ì›ƒ + í‘¸í„° í•˜ë‹¨ ê³ ì • */
    html, body { background:#000; }
    .page { background:#000; width:100%; }
    
    /* í¬ìŠ¤í„°: ìë¥´ì§€ ì•Šê³  í™”ë©´ì— ë§ì¶° í‘œì‹œ */
    .poster-stage{
      /* ì´ë¯¸ì§€ê°€ ëë‚˜ë©´ ë°”ë¡œ í‘¸í„°ê°€ ë‹¿ë„ë¡: ê·¸ë¦¬ë“œ/ì„¼í„°ë§ ì œê±° */
      display:block;
      background:#000;
      padding:var(--nav-safe) 0 0 0;
      box-sizing:border-box;
      overflow:hidden;
      width:100%;
      line-height:0; /* ì¸ë¼ì¸ ê³µë°± ì œê±°(í˜¹ì‹œ ëª¨ë¥¼ ê°­ ë°©ì§€) */
    }
    .poster-stage .poster-horizontal{
      margin: -50px auto 0; /* ìœ„ë¡œ 50px, ì¢Œìš° ì¤‘ì•™ ì •ë ¬, í•˜ë‹¨ ì—¬ë°± 0 */
      max-width:100%;   /* ìŠ¤í…Œì´ì§€ ë„ˆë¹„ë¥¼ ë„˜ì§€ ì•ŠìŒ */
      height:auto;      /* ë¹„ìœ¨ ìœ ì§€ */
      display:block;
    }
    .poster-stage{ padding-bottom:0; margin-bottom:0; }
    .poster-stage .poster-horizontal{ margin-bottom:0; }

    /* ì»¨í…ì¸ ê°€ ì§§ì•„ë„ í‘¸í„°ê°€ í•˜ë‹¨ì— ë¨¸ë¬´ë¥´ë„ë¡ */
    #footer-placeholder { margin-top:0; background:#000; }

    /* ë§¨ ìœ„ë¡œ ë²„íŠ¼: í•­ìƒ ìµœìƒë‹¨ í‘œì‹œ */
    .scroll-btn{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:99999; /* ë§¨ ìœ„ */
      display:none;
      align-items:center;
      justify-content:center;
      width:44px; height:44px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background:#000;
      color:#fff; font-weight:900; letter-spacing:.3px;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      cursor:pointer;
    }
    .scroll-btn:hover{ border-color:#ff3b3b; box-shadow:0 6px 22px rgba(255,59,59,.25); }

    
    footer, .site-footer, #footer{
      position:relative !important; /* ì´ë¯¸ì§€ ìœ„ë¡œ ê²¹ì¹˜ì§€ ì•ŠìŒ */
      width:100%;
      background:#000 !important;
      border-top:1px solid var(--line);
      z-index: 1;
    }

  </style>
</head>


<body>
  <!-- 
    // ë³¸ë¬¸ ì£¼ìš” ì„¹ì…˜ ì•ˆë‚´
    // 1) #nav-placeholder : ë„¤ë¹„ê²Œì´ì…˜
    // 2) #cursor-placeholder : ì»¤ì„œ
    // 3) .poster-stage : ë©”ì¸ í¬ìŠ¤í„° ì˜ì—­
    // 4) #footer-placeholder : í‘¸í„°
  -->
  <div class="page">
    <!-- ğŸ”º ë„¤ë¹„ê²Œì´ì…˜ ì˜ì—­ -->
    <div id="nav-placeholder"></div>
    <div id="cursor-placeholder"></div>

    <!-- ğŸ”» ì „ì‹œ ì •ë³´: í™”ë©´ì— ë”± ë§ê²Œ í¬ìŠ¤í„° í‘œì‹œ -->
    <div class="poster-stage">
      <img class="poster-horizontal" src="../../1.Picture/1. 27th Graduation/BLOOM_Poster/ê°€ë¡œ.jpg" alt="ê°€ë¡œ" loading="lazy" />
    </div>
    

    <!-- ğŸ”» í‘¸í„° ì˜ì—­ -->
    <div id="footer-placeholder"></div>
  </div>

  <!-- Scroll to Top Button -->
  <button onclick="scrollToTop()" id="scrollTopBtn" class="scroll-btn">â–²</button>

  
  <!-- ğŸ“œ JavaScript -->
  <script>
    // [ë„¤ë¹„ê²Œì´ì…˜] ê²½ë¡œ í›„ë³´(ìš°ì„ : Tob_nav_project.html â†’ ì‹¤íŒ¨ ì‹œ Tob_nav.html)
    const __navPaths = [
      '../../2.PageElement/Tob_nav/Tob_nav.html'
    ];
    
    
    // [ë„¤ë¹„ê²Œì´ì…˜] HTML ê°€ì ¸ì˜¤ê¸°(fetch) - ì‹¤íŒ¨ ì‹œ ë‹¤ìŒ í›„ë³´ë¡œ ì¬ê·€ ì‹œë„
    function fetchNav(paths){
      const [first, ...rest] = paths;
      return fetch(first, { cache: 'no-store' }).then(r => {
        if (!r.ok) throw new Error('HTTP ' + r.status);
        return r.text();
      }).catch(err => {
        if (!rest.length) throw err;
        return fetchNav(rest);
      });
    }

    // [ë„¤ë¹„ê²Œì´ì…˜] ì£¼ì… +  ë§í¬ ì •ê·œí™” + ë„¤ë¹„ ë†’ì´ ë³´ì •(--nav-safe)
    fetchNav(__navPaths)
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');

        // ë§í¬ ì •ê·œí™”: í˜„ì¬ ë””ë ‰í† ë¦¬(/2025) ê¸°ì¤€ìœ¼ë¡œ ë§¤í•‘
        const baseDir = location.pathname.replace(/\/[^/]*$/, '');
        const toURL = (file) => `${baseDir}/${file}`.replace(/\/{2,}/g, '/');
        const linkMap = {
          'home': toURL('Main.html'),
          'about': toURL('About.html'),
          'project': toURL('Project.html'),
          'designer': toURL('Designer.html'),
          'guest': toURL('Guest.html'),
          'guest book': toURL('Guest.html'),
          'guestbook': toURL('Guest.html'),
        };

        doc.querySelectorAll('a[href]').forEach(a => {
          const text = (a.textContent || '').trim().toLowerCase();
          const href = (a.getAttribute('href') || '').trim();
          if (linkMap[text]) { a.setAttribute('href', linkMap[text]); return; }
          if (/about/i.test(href))          a.setAttribute('href', linkMap['about']);
          else if (/project/i.test(href))   a.setAttribute('href', linkMap['project']);
          else if (/designer/i.test(href))  a.setAttribute('href', linkMap['designer']);
          else if (/guest(\s*book)?/i.test(href)) a.setAttribute('href', linkMap['guest']);
          else if (/main|home|index/i.test(href))  a.setAttribute('href', linkMap['home']);
        });


        // í—¤ë”ë§Œ ì£¼ì… (ë¶ˆí•„ìš”í•œ ë˜í¼ ì œê±°)
        const headerEl = doc.querySelector('header');
        const navRoot = document.getElementById('nav-placeholder');
        if (navRoot && headerEl) {
          navRoot.innerHTML = '';
          navRoot.appendChild(headerEl);
        }

        // ë„¤ë¹„ ë†’ì´ë§Œí¼ ìŠ¤í˜ì´ì„œ/ì•ˆì „ì—¬ë°± í™•ë³´ (í¬ìŠ¤í„°ê°€ ê°€ë ¤ì§€ì§€ ì•Šê²Œ)
        (function syncNavOffset(){
          function setSafe(){
            const header = document.querySelector('#nav-placeholder header');
            const h = header ? header.offsetHeight : 0;
            document.documentElement.style.setProperty('--nav-safe', h + 'px');
          }
          setSafe();
          window.addEventListener('resize', setSafe, { passive:true });
          setTimeout(setSafe, 150);
          setTimeout(setSafe, 600);
        })()});

    // [ì»¤ì„œ] ì¥ë¯¸ ì»¤ì„œ ë¡œë“œ ë° ìŠ¤í”„ë§ ëª¨ì…˜ ì ìš©
    (function loadCursor(){
      const root = document.getElementById('cursor-placeholder');
      if (!root) return;

      function initRoseCursor(){
        // #cursor-placeholder ë‚´ë¶€ì— ì£¼ì…ëœ ì»¤ì„œ ìš”ì†Œë§Œ ì‚¬ìš©
        const el = document.querySelector('#cursor-placeholder .cursor-dot, #cursor-placeholder .rose-cursor, #cursor-placeholder [data-rose-cursor]');
        if (!el) return false;
        if (el.dataset.raf === 'on') return true; // prevent double-binding

        // ê¸°ë³¸ ìŠ¤íƒ€ì¼
        el.style.pointerEvents = 'none';
        el.style.position = 'fixed';
        el.style.zIndex = '99999';
        el.style.willChange = 'transform, opacity';
        el.style.left = '0px';
        el.style.top  = '0px';

        // ì‚¬ìš©ìê°€ ëª¨ì…˜ ì¶•ì†Œë¥¼ ì„ í˜¸í•˜ë©´ ì¦‰ì‹œ ì¶”ì¢… ëª¨ë“œë¡œ ì „í™˜
        try{
          const prefersReduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          if (prefersReduce){
            document.addEventListener('mousemove', (e)=>{
              el.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0)`;
              el.style.opacity = '1';
            }, { passive:true });
            return true;
          }
        }catch(_){ /* ignore */ }

        // ë§ˆìš°ìŠ¤ ì¢Œí‘œ(ëª©í‘œ)ì™€ í˜„ì¬ ì¢Œí‘œ(í”„ë¡ì‹œ) ë° ì†ë„
        let x = 0, y = 0;   // target (mouse)
        let px = 0, py = 0; // current (proxy)
        let vx = 0, vy = 0; // velocity (for spring)
        // ìŠ¤í”„ë§ íŒŒë¼ë¯¸í„° (ë” ë¹ ë¥´ê³  ê²½ì¾Œí•˜ê²Œ)
        const STIFF = 0.20; // ê°•ì„± â†‘ : ë” ë¹¨ë¦¬ ëª©í‘œë¥¼ ë”°ë¼ê°
        const DAMP  = 0.88; // ê°ì‡  â†“ : ë°˜ì‘ì„± í–¥ìƒ(ì”ë–¨ë¦¼ì€ ì ë‹¹íˆ ìœ ì§€)

        // ì•µì»¤/í•«ìŠ¤íŒŸ ì§€ì›
        // - data-hotspot-x / data-hotspot-y(px)ê°€ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©
        // - ì—†ìœ¼ë©´ data-anchor-x / data-anchor-y(0~1 ë¹„ìœ¨, ê¸°ë³¸ 0.5, 0.5) ì‚¬ìš©
        const hotspotX = parseFloat(el.getAttribute('data-hotspot-x'));
        const hotspotY = parseFloat(el.getAttribute('data-hotspot-y'));

        let anchorX = parseFloat(el.getAttribute('data-anchor-x'));
        let anchorY = parseFloat(el.getAttribute('data-anchor-y'));
        if (!isFinite(anchorX)) anchorX = 0.5;
        if (!isFinite(anchorY)) anchorY = 0.5;

        // ì„ íƒ: í˜ì´ì§€ë³„ í”½ì…€ ë³´ì •(ì‹œìŠ¤í…œ ì»¤ì„œ ìœ„ì¹˜ì™€ ì •í™•íˆ ë§ì¶¤)
        const calXAttr = parseFloat(el.getAttribute('data-cal-x'));
        const calYAttr = parseFloat(el.getAttribute('data-cal-y'));
        const CALX = Number.isFinite(calXAttr) ? calXAttr : 0;
        const CALY = Number.isFinite(calYAttr) ? calYAttr : 0;

        let offX = 0, offY = 0;
        const updateOffset = () => {
          const r = el.getBoundingClientRect();
          const w = r.width  || el.offsetWidth  || 0;
          const h = r.height || el.offsetHeight || 0;
          offX = isFinite(hotspotX) ? hotspotX : w * anchorX;
          offY = isFinite(hotspotY) ? hotspotY : h * anchorY;
          // ìŠ¤ì¼€ì¼ ë³€í™”ì—ë„ ì‹œê°ì  ì•µì»¤(í•«ìŠ¤íŒŸ)ê°€ ì‹¤ì œ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì— ê³ ì •ë˜ë„ë¡
          el.style.transformOrigin = `${offX}px ${offY}px`;
        };
        updateOffset();
        try { new ResizeObserver(updateOffset).observe(el); } catch(_) {}

        // í´ë¦­ ì‹œ ìŠ¤ì¼€ì¼ ì• ë‹ˆë©”ì´ì…˜(ë³€í™˜ ë¬¸ìì—´ì— ë§ë¶™ì´ì§€ ì•Šê³  êµ¬ì„±)
        let targetScale = 1;
        let scale = 1;

        let lastTs = performance.now();
        function raf(now){
          const dt = Math.min((now - lastTs) / 16.67, 3); // 60fps ê¸°ì¤€ ë°°ìˆ˜, ê³¼ë„í•œ í”„ë ˆì„ ê°„ê²© ìƒí•œ
          lastTs = now;

          // ì‹œê°„ ê¸°ë°˜ ìŠ¤í”„ë§ ì ë¶„ (dt ë°˜ì˜)
          const dampPow = Math.pow(DAMP, dt);
          vx = (vx + (x - px) * STIFF * dt) * dampPow;
          vy = (vy + (y - py) * STIFF * dt) * dampPow;
          px += vx; py += vy;

          // ìŠ¤ì¼€ì¼ ì ì§„ ë³€í™” (ì¡°ê¸ˆ ë” ë¹ ë¥´ê²Œ)
          scale += (targetScale - scale) * 0.28 * dt;

          el.style.transform = `translate3d(${(px - offX + CALX)}px, ${(py - offY + CALY)}px, 0) scale(${scale})`;
          requestAnimationFrame(raf);
        }

        // ë§ˆìš°ìŠ¤ ì¶”ì (ì´ˆê¸° ì í”„ ë°©ì§€ë¥¼ ìœ„í•´ ì²« ì§€ì ë¶€í„° ì‹œì‘)
        document.addEventListener('mousemove', (e) => {
          x = e.clientX; y = e.clientY;
          if (el.dataset.started !== '1'){
            px = x; py = y; vx = 0; vy = 0;
            el.style.opacity = '1';
            el.dataset.started = '1';
          }
        }, { passive: true });

        // í´ë¦­ í”¼ë“œë°±
        document.addEventListener('mousedown', () => { targetScale = 0.94; }, { passive: true });
        document.addEventListener('mouseup',   () => { targetScale = 1;    }, { passive: true });

      
        // ë³´ì •ê°’ì„ ë¹ ë¥´ê²Œ ì¡°ì ˆí•˜ê¸° ìœ„í•œ ê°œë°œ ë³´ì¡° í•¨ìˆ˜
        window.__setRoseCursorCal = (x = 0, y = 0) => {
          el.setAttribute('data-cal-x', String(x));
          el.setAttribute('data-cal-y', String(y));
        };

        el.dataset.raf = 'on';
        requestAnimationFrame((t)=>{ lastTs = t; raf(t); });
        return true;
      }

      fetch('../../2.PageElement/Cursor/cursor.html', { cache: 'no-store' })
        .then(res => res.text())
        .then(html => {
          root.innerHTML = html;
          if (!initRoseCursor()){
            const mo = new MutationObserver(() => { if (initRoseCursor()) mo.disconnect(); });
            mo.observe(root, { childList: true, subtree: true });
          }
        })
        .catch(err => console.error('Cursor load failed:', err));
    })();

    // [í‘¸í„°] HTML ì£¼ì…
    // í‘¸í„° HTML ë¡œë“œ
    fetch('../../2.PageElement/Footer/Footer.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById('footer-placeholder').innerHTML = data;
      });

    // [UI] ë§¨ ìœ„ë¡œ ë²„íŠ¼(ë…¸ì¶œ/ìˆ¨ê¹€ + ìŠ¤ë¬´ìŠ¤ ìŠ¤í¬ë¡¤)
    // ë§¨ ìœ„ë¡œ ë²„íŠ¼ ë™ì‘
    document.addEventListener("DOMContentLoaded", function () {
      const scrollBtn = document.getElementById("scrollTopBtn");
      window.addEventListener("scroll", function () {
        if (document.body.scrollTop > 1 || document.documentElement.scrollTop > 1) {
          scrollBtn.style.display = "flex";
        } else {
          scrollBtn.style.display = "none";
        }
      });
      // ìŠ¤ë¬´ìŠ¤ ìŠ¤í¬ë¡¤ë¡œ ìµœìƒë‹¨ ì´ë™ í•¨ìˆ˜ ë…¸ì¶œ
      window.scrollToTop = function () {
        window.scrollTo({ top: 0, behavior: "smooth" });  
      };
    });

    // [ë„¤ë¹„ê²Œì´ì…˜] ìŠ¤í¬ë¡¤ ë°©í–¥ ê°ì§€ â†’ ìˆ¨ê¹€/í‘œì‹œ
      (function bindHideNavOnScroll(){
        const THRESH = 6;   // ì¡°ê¸ˆ ë” ë‚´ë ¤ê°€ì•¼ ë°˜ì‘ (ë¶ˆí•„ìš”í•œ ê¹œë¹¡ì„ ë°©ì§€)
        const TOPSAFE = 48;  // ìƒë‹¨ì—ì„œëŠ” ì¢€ ë” ì˜¤ë˜ ë³´ì´ê²Œ

        let lastY = window.pageYOffset || 0;
        let ticking = false;

        function applyState(y, dy){
          if (y <= TOPSAFE){
            document.body.classList.remove('nav-hidden');
            return;
          }
          if (Math.abs(dy) < THRESH) return;
          if (dy > 0){
            document.body.classList.add('nav-hidden');   // ì•„ë˜ë¡œ â†’ ìˆ¨ê¹€
          }else{
            document.body.classList.remove('nav-hidden'); // ìœ„ë¡œ â†’ í‘œì‹œ
          }
        }

        function onScroll(){
          const y = window.pageYOffset || 0;
          const dy = y - lastY;
          lastY = y;
          if (!ticking){
            ticking = true;
            requestAnimationFrame(() => { applyState(y, dy); ticking = false; });
          }
        }

        window.addEventListener('scroll', onScroll, { passive:true });
        ['wheel','touchmove','touchstart','keydown'].forEach(evt => {
          window.addEventListener(evt, onScroll, { passive:true });
        });

        // ì´ˆê¸° ìƒíƒœ
        requestAnimationFrame(() => applyState(window.pageYOffset || 0, 0));
      })();

    // [ë¼ìš°íŒ…] í™”ë©´ ë„ˆë¹„ ê¸°ì¤€ í˜ì´ì§€ ì „í™˜ // (>=640: Main.html, <=639: Main-mobile.html)
    (function responsiveRoute(){
      const DESKTOP_BASE = 'Main';          // í™•ì¥ì ì—†ì´ ë² ì´ìŠ¤ëª…ìœ¼ë¡œ ë¹„êµ
      const MOBILE_BASE  = 'Main-mobile';   // í™•ì¥ì ì—†ì´ ë² ì´ìŠ¤ëª…ìœ¼ë¡œ ë¹„êµ

      function isOnBase(base){
        const p = location.pathname.toLowerCase().replace(/\/+$/, '');
        const b = base.toLowerCase().replace(/\.html?$/, '');
        return (
          p.endsWith('/'+b) ||            // .../Main
          p.endsWith('/'+b+'.html') ||    // .../Main.html
          p.endsWith('/'+b+'/') ||        // .../Main/
          p.endsWith('/'+b+'/index.html') // .../Main/index.html
        );
      }
      function goToBase(base){
        const baseDir = location.pathname.replace(/[^/]*$/, '');
        const file = base + '.html';
        location.replace(baseDir + file);
      }

      const mq = window.matchMedia('(max-width: 639px)');
      let ticking = false;
      function check(){
        if (ticking) return; ticking = true;
        requestAnimationFrame(() => {
          const isMobile = mq.matches;
          if (isMobile && isOnBase(DESKTOP_BASE)) goToBase(MOBILE_BASE);
          else if (!isMobile && isOnBase(MOBILE_BASE)) goToBase(DESKTOP_BASE);
          ticking = false;
        });
      }

      if (mq.addEventListener) mq.addEventListener('change', check, {passive:true});
      else if (mq.addListener) mq.addListener(check);
      window.addEventListener('resize', check, {passive:true});
      window.addEventListener('orientationchange', check, {passive:true});
      document.addEventListener('DOMContentLoaded', check);
      setTimeout(check, 120);
      // iOS/Safariì—ì„œ ì£¼ì†Œì°½ ìˆ¨ê¹€ ë“±ìœ¼ë¡œ viewport ë³´ê³ ê°€ ëŠ¦ëŠ” ê²½ìš° ëŒ€ë¹„í•œ í‚¥ íƒ€ì´ë¨¸(ì•½ 2ì´ˆ)
      let kicks = 0;
      const kickTimer = setInterval(()=>{ kicks++; check(); if (kicks > 10) clearInterval(kickTimer); }, 200);
      // í˜ì´ì§€ ë³µê·€/ê°€ì‹œì„± ë³€í™”ì—ë„ ì¬ê²€ì‚¬
      window.addEventListener('pageshow', check, {passive:true});
      document.addEventListener('visibilitychange', check, {passive:true});
    })();
  </script>
</body>
</html>